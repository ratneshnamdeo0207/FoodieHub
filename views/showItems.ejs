<% layout("layouts/boilerplate") %>
<div class="container py-5">

  <!-- Page Title -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">All Food Items</h2>

    <a href="/items/new" class="btn btn-dark rounded-pill px-4">
      + Add New Item
    </a>
  </div>

  <!-- Items Grid -->
  <div class="row g-4 align-items-start">

    <% if(items.length > 0) { %>

      <% items.forEach(item => { %>

        <div class="col-md-4">
          <div class="card border-0 shadow-sm rounded-4 h-100 overflow-hidden">

            <!-- Image -->
            <img 
              src="<%= item.image.url %>" 
              class="card-img-top"
              style="height: 220px; object-fit: cover;"
              alt="<%= item.image.filename %>"
            >

            <div class="card-body d-flex flex-column p-4">

              <!-- Name -->
              <h5 class="fw-bold mb-2">
                <%= item.name %>
              </h5>

              <!-- Price -->
              <h6 class="text-success fw-semibold mb-2">
                â‚¹<%= item.price %>
              </h6>

              <!-- Description -->
              <p class="text-muted small mb-3 flex-grow-1">
                <%= item.description %>
              </p>

              <!-- Buttons -->
              <div class="mt-auto d-flex gap-2">

                <a href="/items/<%= item._id %>"
                   class="btn btn-outline-primary btn-sm rounded-pill">
                  View
                </a>

                <a href="/items/<%= item._id %>/edit"
                   class="btn btn-outline-secondary btn-sm rounded-pill">
                  Edit
                </a>

                <form action="/items/<%= item._id %>?_method=DELETE"
                      method="POST">
                  <button class="btn btn-outline-danger btn-sm rounded-pill">
                    Delete
                  </button>
                </form>

              </div>

            </div>
          </div>
        </div>

      <% }) %>

    <% } else { %>

      <div class="col-12">
        <div class="alert alert-secondary text-center py-5">
          No items available.
        </div>
      </div>

    <% } %>

  </div>

</div>
